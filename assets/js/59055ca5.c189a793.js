"use strict";(self.webpackChunkclassic=self.webpackChunkclassic||[]).push([[2782],{63934:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"NeoEdge NG4500 Series/NG4500-CB01 Development Board/Software Guide/Driver Installation and Updates/wifi","title":"WIFI","description":"This document provides installation and usage instructions for the Wi-Fi driver on the NeoEdge NG4500-CB01 platform, using the Realtek RTL8821CE module as a reference example.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/1-NeoEdge NG4500 Series/2-NG4500-CB01 Development Board/2-Software Guide/1-Driver Installation and Updates/1-wifi.md","sourceDirName":"1-NeoEdge NG4500 Series/2-NG4500-CB01 Development Board/2-Software Guide/1-Driver Installation and Updates","slug":"/NeoEdge NG4500 Series/NG4500-CB01 Development Board/Software Guide/Driver Installation and Updates/wifi","permalink":"/docs/NeoEdge NG4500 Series/NG4500-CB01 Development Board/Software Guide/Driver Installation and Updates/wifi","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Interface","permalink":"/docs/NeoEdge NG4500 Series/NG4500-CB01 Development Board/Software Guide/Driver Installation and Updates/Interface&modules configure"},"next":{"title":"OV5647 Camera Module Adaptation Guide","permalink":"/docs/NeoEdge NG4500 Series/NG4500-CB01 Development Board/Software Guide/Driver Installation and Updates/ov5647"}}');var t=r(74848),o=r(28453);const s={},l="WIFI",d={},c=[{value:"Installation Method",id:"installation-method",level:2},{value:"Installation Within the System",id:"installation-within-the-system",level:2},{value:"Source Compilation and Installation",id:"source-compilation-and-installation",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"wifi",children:"WIFI"})}),"\n",(0,t.jsx)(n.p,{children:"This document provides installation and usage instructions for the Wi-Fi driver on the NeoEdge NG4500-CB01 platform, using the Realtek RTL8821CE module as a reference example."}),"\n",(0,t.jsx)(n.h2,{id:"installation-method",children:"Installation Method"}),"\n",(0,t.jsx)(n.p,{children:"The Wi-Fi driver supports two installation methods\uff1a"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Direct installation within the system"}),"\uff08recommended, simple and quick\uff09"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Compile the driver from source and flash"}),"\uff08suitable for customized scenarios or when the kernel version is incompatible\uff09"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"installation-within-the-system",children:"Installation Within the System"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Follow the steps below to install the driver\uff1a"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Install the driver"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ sudo apt update\r\n$ sudo apt install rtl8821ce-dkms\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Load the driver"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ sudo modprobe rtl8821ce\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"Verify driver loading"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ dmesg | grep rtl\n"})}),"\n",(0,t.jsx)(n.p,{children:"\xa0\xa0\xa0\xa0\xa0\xa0\xa0A typical log output might look like this:\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"[   10.805932] rtl8821ce 0001:01:00.0: Adding to iommu group 3\r\n[   10.806901] rtl8821ce 0001:01:00.0: enabling device (0000 -> 0003)\r\n[   11.077841] Bluetooth: hci0: RTL: loading rtl_bt/rtl8821c_fw.bin\r\n[   11.079036] Bluetooth: hci0: RTL: loading rtl_bt/rtl8821c_config.bin\r\n[   11.320620] rtl8821ce 0001:01:00.0 wlP1p1s0: renamed from wlan0\n"})}),"\n",(0,t.jsx)(n.h2,{id:"source-compilation-and-installation",children:"Source Compilation and Installation"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Code Acquisition"}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Official git repository\uff1a",(0,t.jsx)(n.a,{href:"https://github.com/tomaspinho/rtl8821ce",children:"GitHub - tomaspinho/rtl8821ce"})]}),"\n",(0,t.jsxs)(n.li,{children:["By the Wi-Fi vendor(",(0,t.jsx)(n.a,{href:"https://github.com/tomaspinho/rtl8821ce",children:"https://github.com/tomaspinho/rtl8821ce"}),")"]}),"\n"]}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Directory Placement"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Place the source code in the following path:\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Linux_for_Tegra/source/nvidia-oot/drivers/net/wireless/realtek/rtl8821ce\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"Makefile Configuration"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Add the following line to the main Makefile:\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"obj-m += rtl8821ce/\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Then, modify the Makefile inside the ",(0,t.jsx)(n.code,{children:"rtl8821ce"})," directory as needed to enable TEGRA platform support, for example\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"diff --git a/Makefile b/Makefile\r\nindex 5b5dc9a..01b1e24 100755\r\n--- a/Makefile\r\n+++ b/Makefile\r\n@@ -15,6 +15,8 @@ EXTRA_CFLAGS += -Wno-unused-parameter\r\n EXTRA_CFLAGS += -Wno-unused-function\r\n EXTRA_CFLAGS += -Wno-unused\r\n #EXTRA_CFLAGS += -Wno-uninitialized\r\n+EXTRA_CFLAGS += -Wno-missing-prototypes\r\n+EXTRA_CFLAGS += -Wno-error=misleading-indentation\r\n\r\n GCC_VER_49 := $(shell echo `$(CC) -dumpversion | cut -f1-2 -d.` \\>= 4.9 | bc )\r\n ifeq ($(GCC_VER_49),1)\r\n@@ -29,6 +31,7 @@ else\r\n     export TopDIR ?= $(srctree)/$(src)\r\n endif\r\n\r\n+TopDIR = $(srctree.nvidia-oot)/drivers/net/wireless/realtek/rtl8821ce\r\n EXTRA_CFLAGS += -I$(TopDIR)/include\r\n\r\n EXTRA_LDFLAGS += --strip-debug\r\n@@ -113,7 +116,8 @@ CONFIG_RTW_SDIO_PM_KEEP_POWER = y\r\n ###################### MP HW TX MODE FOR VHT #######################\r\n CONFIG_MP_VHT_HW_TX_MODE = n\r\n ###################### Platform Related #######################\r\n-CONFIG_PLATFORM_I386_PC = y\r\n+CONFIG_PLATFORM_TEGRA = y\r\n+CONFIG_PLATFORM_I386_PC = n\r\n CONFIG_PLATFORM_ANDROID_X86 = n\r\n CONFIG_PLATFORM_ANDROID_INTEL_X86 = n\r\n CONFIG_PLATFORM_JB_X86 = n\r\n@@ -1212,6 +1216,15 @@ endif\r\n\r\n EXTRA_CFLAGS += -DDM_ODM_SUPPORT_TYPE=0x04\r\n\r\n+ifeq ($(CONFIG_PLATFORM_TEGRA), y)\r\n+ARCH = arm\r\n+KVER := $(shell uname -r)\r\n+KSRC := /lib/modules/$(KVER)/build\r\n+EXTRA_CFLAGS += -DCONFIG_LITTLE_ENDIAN\r\n+EXTRA_CFLAGS += -DCONFIG_IOCTL_CFG80211 -DRTW_USE_CFG80211_STA_EVENT\r\n+EXTRA_CFLAGS += -Wno-error=date-time\r\n+MODULE_NAME = rtl8821ce\r\n+endif\r\n ifeq ($(CONFIG_PLATFORM_I386_PC), y)\r\n EXTRA_CFLAGS += -DCONFIG_LITTLE_ENDIAN\r\n EXTRA_CFLAGS += -DCONFIG_IOCTL_CFG80211 -DRTW_USE_CFG80211_STA_EVENT\r\n@@ -2232,7 +2245,7 @@ ifeq ($(CONFIG_RTL8723B), y)\r\n $(MODULE_NAME)-$(CONFIG_MP_INCLUDED)+= core/rtw_bt_mp.o\r\n endif\r\n\r\n-obj-$(CONFIG_RTL8821CE) := $(MODULE_NAME).o\r\n+obj-m := $(MODULE_NAME).o\r\n\r\n else\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsx)(n.li,{children:"Compile and Flash"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0Compile the kernel or module, then install the module into the root filesystem and flash the system. For detailed compilation and flashing methods, please refer to the official NVIDIA Jetson documentation."}),"\n",(0,t.jsxs)(n.ol,{start:"5",children:["\n",(0,t.jsx)(n.li,{children:"Usage and Verification"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Use the following command to manually load the driver module:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ sudo modprobe rtl8821ce\n"})}),"\n",(0,t.jsx)(n.p,{children:"Verify that the device is correctly recognized by the PCI subsystem:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ sudo lspci\r\n0001:01:00.0 Network controller: Realtek Semiconductor Co., Ltd. RTL8821CE 802.11ac PCIe Wireless Network Adapter\n"})}),"\n",(0,t.jsx)(n.p,{children:"Inspect kernel messages to confirm the driver loaded successfully:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ sudo dmesg | grep rtl\r\n[    9.785137] rtl8821ce 0001:01:00.0: Adding to iommu group 3\r\n[    9.785307] rtl8821ce 0001:01:00.0: enabling device (0000 -> 0003)\r\n[   10.010615] Bluetooth: hci0: RTL: loading rtl_bt/rtl8821c_fw.bin\r\n[   10.011780] Bluetooth: hci0: RTL: loading rtl_bt/rtl8821c_config.bin\r\n[   10.441574] rtl8821ce 0001:01:00.0 wlP1p1s0: renamed from wlan0\n"})}),"\n",(0,t.jsx)(n.p,{children:"Confirm the Wi-Fi interface is up and running from the network settings page"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"RTL8821_wifi_connection1.png",src:r(74486).A+"",width:"423",height:"493"})}),"\n",(0,t.jsxs)(n.p,{children:["Run ",(0,t.jsx)(n.code,{children:"ifconfig"})," to  inspect interface configuration and status:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"wlP1p1s0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\r\n        inet 192.168.204.218  netmask 255.255.255.0  broadcast 192.168.204.255\r\n        inet6 fe80::aba:6776:77ec:4831  prefixlen 64  scopeid 0x20<link>\r\n        inet6 2409:8934:20d4:908:f2b8:fd54:f19a:a11a  prefixlen 64  scopeid 0x0<global>\r\n        inet6 2409:8934:20d4:908:5de2:d217:83e0:d943  prefixlen 64  scopeid 0x0<global>\r\n        ether a4:e8:8d:0f:e4:ce  txqueuelen 1000  (Ethernet)\r\n        RX packets 2060  bytes 2644294 (2.6 MB)\r\n        RX errors 0  dropped 48  overruns 0  frame 0\r\n        TX packets 1656  bytes 195010 (195.0 KB)\r\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0ons 0\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"ping"})," to verify external network connectivity:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ ping -I wlP1p1s0 www.baidu.com\r\nPING www.baidu.com(2409:8c20:6:1d55:0:ff:b09c:7d77 (2409:8c20:6:1d55:0:ff:b09c:7d77)) from 2409:8934:20d4:908:5de2:d217:83e0:d943 wlP1p1s0: 56 data bytes\r\n64 bytes from 2409:8c20:6:1d55:0:ff:b09c:7d77 (2409:8c20:6:1d55:0:ff:b09c:7d77): icmp_seq=1 ttl=48 time=88.7 ms\r\n64 bytes from 2409:8c20:6:1d55:0:ff:b09c:7d77 (2409:8c20:6:1d55:0:ff:b09c:7d77): icmp_seq=2 ttl=48 time=50.8 ms\r\n64 bytes from 2409:8c20:6:1d55:0:ff:b09c:7d77 (2409:8c20:6:1d55:0:ff:b09c:7d77): icmp_seq=3 ttl=48 time=80.5 ms\r\n64 bytes from 2409:8c20:6:1d55:0:ff:b09c:7d77 (2409:8c20:6:1d55:0:ff:b09c:7d77): icmp_seq=4 ttl=48 time=86.1 ms\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.p,{children:"Note: For other Wi-Fi chipsets, please refer to the corresponding vendor documentation and kernel adaptation process."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},74486:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/RTL8821_wifi_connection1-8f053624f6300ee150825aafdc321554.png"},28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>l});var i=r(96540);const t={},o=i.createContext(t);function s(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);